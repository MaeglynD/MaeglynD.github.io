<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon">
    <title>Maeglyn Davies</title>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:200|Montserrat:400|Roboto+Mono' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="../css/stylesheet.css">
    <link rel="stylesheet" href="../css/projectStyles.css">
    <link rel="stylesheet" href="../css/quoteStyles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atelier-sulphurpool-light.min.css">
  </head>
  <body>
    <div id="qrs"></div>
    <div id="containerr">
      <h1>PROJECTS</h1>
      <div id="list-container">
        <ul>
          <li>
            <h3>SEP 2018</h3>
            <h2>QUOTE GAME & RANDOMIZATION STUDY</h2>
          </li>
        </ul>
      </div>
      <div class="item-cont">
        <a href="https://quotegame.github.io" target="_blank"><img src="../assets/gameExample.png"></a>
        <p>The game is very simple, a quote is given along with 4 possible different
           answers to choose from. Choose the correct source of the quote (within the 30 second timer)
           and the score increases by one. Not exactly breathtaking gameplay, but hey the code behind
           it is pretty interesting.</p>

           <h3>Randomizing and validating the chosen quote</h3>
        <pre><code>
    function getRandIt(y){
     return y[Math.floor(Math.random() * y.length)];
    }
    var randBadReg = getRandIt(mainQuotes);
    for (var i = 0; i < badQuotes.length; i++) {
       amountOfQuotes += badQuotes[i]["said"].length
     }
    for (var i = 0; i < regQuotes.length; i++) {
     amountOfQuotes += regQuotes[i]["said"].length
    }
    if(randArray["said"].length == 0){
     if(amountOfQuotes == 0){
       timeoutModal();
       winner();
       return
     }else{
       do {
         randBadReg = getRandIt(mainQuotes);
         if(randBadReg == mainQuotes[0]){
           nameOfRand = "badQuotes";
         }else{
           nameOfRand = "regQuotes";
         }
         randArray = getRandIt(randBadReg[nameOfRand]);
         randQ = getRandIt(randArray["said"]);
       } while (randArray["said"].length == 0);
     }
    }
    correctOrigin = randArray["name"];
    currentQuote.innerHTML = randQ;

    for (var i = 0; i < randQ.length; i++) {
     if(randQ == randArray["said"][i]){
       randArray["said"].splice(i, 1)
     }
    }
        </code></pre>
        <h4>Note: All quotes, quote sources etc are stored in a separate JSON file</h4>
        <p>Okay, what are we even looking at? Well it's fairly simple, we loop through
          the json to find the sum of all quotes, check to see if we still have quotes
          left, check to see if the array we’re sampling from has any quotes left - if
          not randomly choose another array that does, display it and wallah!</p>
          <h3>Randomizing everything else...</h3>
          <pre><code>
     var randBox = getRandIt(optionContArr);
     //  Displays the quotes origin randomly
     randBox.innerHTML = '&lt;p&gt;' + randArray["name"] + '&lt;/p&gt;';

     switch (randBox) {
       case optContChild[0]:
        optionContArr.splice(0,1);
         break;
       case optContChild[1]:
        optionContArr.splice(1,1);
         break;
       case optContChild[2]:
        optionContArr.splice(2,1);
         break;
       case optContChild[3]:
        optionContArr.splice(3,1);
         break;
     }

     var initalOrigin = "&lt;p&gt;" + randArray["name"];
     quoteArr.push(initalOrigin);

     for (var i = 0; i < optionContArr.length; i++) {
       function retQuote(x){
         return '&lt;p&gt;' + x[Math.floor(Math.random() * x.length)]["name"]; + '&lt;/p&gt;'
       }

       function validateUse(array, what){
         return array.includes(what);
       }

       function validateMultiple(x, y){
         do{
           x = retQuote(y);
         }
         while(validateUse(quoteArr, x) == true);
         return x
       }

       if(nameOfRand == "badQuotes"){
         if(i <= 1){
           var varValidate = validateMultiple(retQuote(regQuotes), regQuotes);
           quoteArr.push(varValidate);
           optionContArr[i].innerHTML = varValidate
         }else{
           var varValidate = validateMultiple(retQuote(badQuotes), badQuotes);
           quoteArr.push(varValidate);
           optionContArr[i].innerHTML = varValidate;
         }
       }else{
         if(i <= 1){
           var varValidate = validateMultiple(retQuote(badQuotes), badQuotes);
           quoteArr.push(varValidate);
           optionContArr[i].innerHTML = varValidate;
         }else{
           var varValidate = validateMultiple(retQuote(regQuotes), regQuotes);
           quoteArr.push(varValidate);
           optionContArr[i].innerHTML = varValidate;
         }
       }
     }
            </code></pre>
          <p>Okay seriously, what am i even looking at? Well TLDR: If a quotes chosen from the ‘bad guy’
             array, it randomly samples two ‘regular guys’ to fill the remaining 3 slots (That way we
             dont just have 3 obviously wrong answers). If an answer is already displayed, it'll ensure
             it wont be displayed again. There's more boring stuff to it than that which we wont go into,
             but feel free to check out the <a href="https://github.com/MaeglynD/Quote-Game" target="_blank">repo!</a></p>
             <h3>Lastly, validating the input...</h3>
             <pre><code>
      for (var i = 0; i < optContChild.length; i++) {
        optContChild[i].onclick = function(e){
            stopTimer();
            answerSubmit(e);
        };
      }

      function answerSubmit(e){
        changeColors();
        if(e.target.innerHTML == "&lt;p&gt;" + correctOrigin + "&lt;/p&gt;"
        || e.target.innerHTML ==  correctOrigin){
          // Success
          correctAnswer();
        }else{
          // Failure
          timeoutModal();
        }
      }
             </code></pre>
             <p>Pretty straightforward, we got a loop adding an event listener to each box,
                once clicked it passes through the event which we can then use to check if
                the text within the box matches the correct answer. So there we have it, a
                completely reusable, randomized gamemode - Currently working on chrome, microsoft
                edge, safari, all phones and all different viewports! </p>
            <div class="quoteFooter">
              <a href="https://quotegame.github.io/">Play</a><br>
              <a href="https://github.com/MaeglynD/Quote-Game">Github repo</a>
            </div>
      </div>
    </div>
  </body>
</html>
