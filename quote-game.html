<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css">
    <link rel="stylesheet" href="blogStyles.css">
    <link href="https://fonts.googleapis.com/css?family=Nunito+Sans:300,400,700,800|Roboto+Mono|Nunito" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atelier-sulphurpool-light.min.css">
    <title>Maeglyn Davies</title>
  </head>
  <body>

    <nav>
      <div class="nav-container">
        <div id="nav-logo">Maeglyn <span>Davies</span></div>
        <div id="nav-icons">
          <a href="https://www.maeglyn.xyz"><i class="fas fa-home"></i></a>
          <div class="chromeFix" id="nightmode"><i class="fas fa-moon"></i>&nbsp;</div>
        </div>
      </div>
    </nav>

    <div class="blog-container">
      <div class="blog-child">

        <span class="date">Sep 2018</span>
        <h1 class="title">Quote Game & Randomization Study</h1>
          <a href="https://quotegame.github.io" target="_blank"><img src="newAssets/gameExample.png" alt=""></a>
        <p class="p-pad-top p-pad-bottom">The game is very simple, a quote is given along with 4 possible different
           answers to choose from. Choose the correct source of the quote (within the 30 second timer)
           and the score increases by one. Not exactly breathtaking gameplay, but hey the code behind
           it is pretty interesting;</p>
        <h3>Randomizing and validating the chosen quote</h3>
        <pre><code>
    function getRandIt(y){
     return y[Math.floor(Math.random() * y.length)];
    }
    var randBadReg = getRandIt(mainQuotes);
    for (var i = 0; i < badQuotes.length; i++) {
       amountOfQuotes += badQuotes[i]["said"].length
     }
    for (var i = 0; i < regQuotes.length; i++) {
     amountOfQuotes += regQuotes[i]["said"].length
    }
    if(randArray["said"].length == 0){
     if(amountOfQuotes == 0){
       timeoutModal();
       winner();
       return
     }else{
       do {
         randBadReg = getRandIt(mainQuotes);
         if(randBadReg == mainQuotes[0]){
           nameOfRand = "badQuotes";
         }else{
           nameOfRand = "regQuotes";
         }
         randArray = getRandIt(randBadReg[nameOfRand]);
         randQ = getRandIt(randArray["said"]);
       } while (randArray["said"].length == 0);
     }
    }
    correctOrigin = randArray["name"];
    currentQuote.innerHTML = randQ;

    for (var i = 0; i < randQ.length; i++) {
     if(randQ == randArray["said"][i]){
       randArray["said"].splice(i, 1)
     }
    }
        </code></pre>
        <h4>Note: All quotes, quote sources etc are stored in a separate JSON file</h4>
        <p class=" p-pad-bottom">Okay, what are we even looking at? Well, starting from the top, we loop through
          the json to find the sum of all quotes, check to see if we still have quotes
          left, check to see if the array we’re sampling from has any quotes left - if
          not randomly choose another array that does, display it and wallah!</p>
          <h3>Randomizing everything else...</h3>
          <pre><code>
     var randBox = getRandIt(optionContArr);
     //  Displays the quotes origin randomly
     randBox.innerHTML = '&lt;p&gt;' + randArray["name"] + '&lt;/p&gt;';

     switch (randBox) {
       case optContChild[0]:
        optionContArr.splice(0,1);
         break;
       case optContChild[1]:
        optionContArr.splice(1,1);
         break;
       case optContChild[2]:
        optionContArr.splice(2,1);
         break;
       case optContChild[3]:
        optionContArr.splice(3,1);
         break;
     }

     var initalOrigin = "&lt;p&gt;" + randArray["name"];
     quoteArr.push(initalOrigin);

     for (var i = 0; i < optionContArr.length; i++) {
       function retQuote(x){
         return '&lt;p&gt;' + x[Math.floor(Math.random() * x.length)]["name"]; + '&lt;/p&gt;'
       }

       function validateUse(array, what){
         return array.includes(what);
       }

       function validateMultiple(x, y){
         do{
           x = retQuote(y);
         }
         while(validateUse(quoteArr, x) == true);
         return x
       }

       if(nameOfRand == "badQuotes"){
         if(i <= 1){
           var varValidate = validateMultiple(retQuote(regQuotes), regQuotes);
           quoteArr.push(varValidate);
           optionContArr[i].innerHTML = varValidate
         }else{
           var varValidate = validateMultiple(retQuote(badQuotes), badQuotes);
           quoteArr.push(varValidate);
           optionContArr[i].innerHTML = varValidate;
         }
       }else{
         if(i <= 1){
           var varValidate = validateMultiple(retQuote(badQuotes), badQuotes);
           quoteArr.push(varValidate);
           optionContArr[i].innerHTML = varValidate;
         }else{
           var varValidate = validateMultiple(retQuote(regQuotes), regQuotes);
           quoteArr.push(varValidate);
           optionContArr[i].innerHTML = varValidate;
         }
       }
     }
            </code></pre>
        <p class="p-pad-top p-pad-bottom">Okay seriously, what am i even looking at? Well TLDR: If a quotes chosen from the ‘bad guy’
           array, it randomly samples two ‘regular guys’ to fill the remaining 3 slots (That way we
           dont just have 3 obviously wrong answers). If an answer is already displayed, it'll ensure
           it wont be displayed again. There's more boring stuff to it than that which we wont go into,
           but feel free to check out the <a href="https://github.com/MaeglynD/Quote-Game" target="_blank">repo!</a></p>
         <h3>Lastly, validating the input...</h3>
         <pre><code>
    for (var i = 0; i < optContChild.length; i++) {
      optContChild[i].onclick = function(e){
          stopTimer();
          answerSubmit(e);
      };
    }

    function answerSubmit(e){
      changeColors();
      if(e.target.innerHTML == "&lt;p&gt;" + correctOrigin + "&lt;/p&gt;"
      || e.target.innerHTML ==  correctOrigin){
        // Success
        correctAnswer();
      }else{
        // Failure
        timeoutModal();
      }
    }
         </code></pre>
         <p class="p-pad-top p-pad-bottom">Pretty straightforward, we got a loop adding an event listener to each box,
            once clicked it passes through the event which we can then use to check if
            the text within the box matches the correct answer. So there we have it, a
            completely reusable, randomized gamemode - Currently working on chrome, microsoft
            edge, safari, all phones and all different viewports! </p>
            <a href="https://quotegame.github.io/" target="_blank" class="font-m">Play</a><br>
            <a href="https://github.com/MaeglynD/Quote-Game" target="_blank" class="font-m">Github repo</a>
      </div>
    </div>
    <div class="footer-container">
      <h1>M <span>D</span></h1>
      <p>If you like what you see, check out these</p>
      <a href="https://twitter.com/MaeglynDavies" target="_blank" ><i class="fab fa-twitter"></i></a>
      <a href="https://codepen.io/maeglyndavies/" target="_blank" ><i class="fab fa-codepen"></i></a>
      <a href="https://github.com/MaeglynD" target="_blank" ><i class="fab fa-github"></i></a>
      <a href="resume.pdf" target="_blank" ><i class="fas fa-file-invoice"></i></a>

    </div>
    <script src="nightmode.js"></script>
  </body>
</html>
